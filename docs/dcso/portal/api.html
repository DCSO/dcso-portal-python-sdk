<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/dcso/dcso-portal-python-sdk" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>dcso.portal.api API documentation</title>
<meta name="description" content="Definition of the APIClient class which is used to start interactions with
the DCSO Portal API." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>dcso.portal.api</code></h1>
</header>
<section id="section-intro">
<p>Definition of the APIClient class which is used to start interactions with
the DCSO Portal API.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># Copyright (c) 2020, DCSO GmbH

&#34;&#34;&#34;
Definition of the APIClient class which is used to start interactions with
the DCSO Portal API.
&#34;&#34;&#34;
import os
import urllib.parse
from collections import namedtuple
from typing import List, Optional

from .abstracts import APIAbstract
from .auth import Auth
from .exceptions import PortalAPIRequest, PortalException
from .util.graphql import GraphQLRequest
from .util.networking import validate_api_url

ENV_PORTAL_TOKEN: str = &#34;DCSO_PORTAL_TOKEN&#34;
&#34;&#34;&#34;Name of the environment variable holding the
DCSO Portal Token to be used when Authorizing.&#34;&#34;&#34;


class APIClient(APIAbstract):
    &#34;&#34;&#34;
    .. include:: apiclient.md
    &#34;&#34;&#34;

    def __init__(self, api_url: str):
        &#34;&#34;&#34;
        The `api_url` parameter is the DCSO Portal API endpoint and must be provided;
        there is no default.
        &#34;&#34;&#34;
        self._api_url: str = &#34;&#34;
        self.api_url = api_url
        self._token: str = os.environ.get(ENV_PORTAL_TOKEN, &#34;&#34;)

        # default services
        self.auth = Auth(api=self)

    @property
    def api_url(self) -&gt; str:
        return self._api_url

    @api_url.setter
    def api_url(self, url: str) -&gt; None:
        &#34;&#34;&#34;Sets the API endpoint using the provided url. Raises `DCSOPortalConfiguration`
        when url is not valid.
        &#34;&#34;&#34;
        self._api_url = validate_api_url(url)

    def api_url_parsed(self) -&gt; urllib.parse.ParseResult:
        return urllib.parse.urlparse(self._api_url)

    @property
    def token(self) -&gt; str:
        return self._token

    @token.setter
    def token(self, token: str):
        &#34;&#34;&#34;Sets the token for each API request. This can be either a User Token (JWT)
        or a Machine Token (also known as API Token).
        &#34;&#34;&#34;
        self._token = token

    def execute_graphql(self, query: str,
                        variables: Optional[dict] = None,
                        fragments: Optional[List[str]] = None) -&gt; namedtuple:
        &#34;&#34;&#34;Executes the GraphQL query and returns response as namedtuple. This
        namedtuple starts from the &#39;data&#39;-object.

        For example, when executing query getting user information:

            response = execute_graphql(`{ user { id name }`)

        the resulting GraphQL JSON might look as follows:

            {
                &#34;data&#34;: {
                    &#34;user&#34;: { &#34;id&#34;: &#34;1234&#34;, &#34;name&#34;: &#34;Alice&#34; }
                }
            }

        Then retrieving and print the name of the user using the response:

            print(f&#34;Name: {response.user.name}&#34;)

        Raises `PortalAPIError` When the GraphQL API endpoint returned an error.
        When there was an issue with the request itself, or decoding JSON failed,
        the `PortalAPIRequest` exception is raised.
        &#34;&#34;&#34;
        request = GraphQLRequest(api_url=self.api_url,
                                 query=query, variables=variables, fragments=fragments,
                                 token=self.token)

        try:
            return request.execute()
        except PortalException:
            raise

    def execute_graphql_dict(self, query: str,
                             variables: Optional[dict] = None,
                             fragments: Optional[List[str]] = None) -&gt; dict:
        &#34;&#34;&#34;Executes the GraphQL request and return response a dictionary.

        For example, when executing query getting user information:

            response = execute_graphql_dict(`{ user { id name }`)

        the resulting GraphQL JSON might look as follows:

            {
                &#34;data&#34;: {
                    &#34;user&#34;: { &#34;id&#34;: &#34;1234&#34;, &#34;name&#34;: &#34;Alice&#34; }
                }
            }

        Then retrieving and print the name of the user using the response:

            print(f&#34;Name: {response[&#39;user&#39;][&#39;name&#39;]}&#34;)

        Raises `PortalAPIError` When the GraphQL API endpoint returned an error.
        When there was an issue with the request itself, or decoding JSON failed,
        the `PortalAPIRequest` exception is raised.
        &#34;&#34;&#34;
        request = GraphQLRequest(api_url=self.api_url,
                                 query=query, variables=variables, fragments=fragments,
                                 token=self.token)

        try:
            return request.execute_dict()[&#39;data&#39;]
        except KeyError as exc:
            raise PortalAPIRequest(f&#34;API request contained unusable error definition {exc}&#34;)
        except PortalException:
            raise

    def is_alive(self) -&gt; bool:
        &#34;&#34;&#34;Returns whether it is possible to communicate with API endpoint.&#34;&#34;&#34;
        request = GraphQLRequest(
            api_url=self.api_url,
            query=&#39;{__schema { queryType { name }}}&#39;
        )

        try:
            result = request.execute_dict()
            return &#39;Query&#39; == result[&#39;data&#39;][&#39;__schema&#39;][&#39;queryType&#39;][&#39;name&#39;]
        except (KeyError, PortalException):
            return False</code></pre>
</details>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-variables">Global variables</h2>
<dl>
<dt id="dcso.portal.api.ENV_PORTAL_TOKEN"><code class="name">var <span class="ident">ENV_PORTAL_TOKEN</span> : str</code></dt>
<dd>
<div class="desc"><p>Name of the environment variable holding the
DCSO Portal Token to be used when Authorizing.</p></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="dcso.portal.api.APIClient"><code class="flex name class">
<span>class <span class="ident">APIClient</span></span>
<span>(</span><span>api_url: str)</span>
</code></dt>
<dd>
<div class="desc"><p><code><a title="dcso.portal.api.APIClient" href="#dcso.portal.api.APIClient">APIClient</a></code> is the main class for interacting with DCSO Portal.</p>
<p>Basic example (<code>api_endpoint</code> is something known to the reader):</p>
<pre><code>from dcso.portal import APIClient

apic = APIClient(api_endpoint)
apic.auth.authenticate(username='alice', password='tea.pots')
</code></pre>
<p>When authentication was successful, the API token will stored in the
APIClient instance, unless the <code>authenticate</code> method was called with
parameter <code>set_api_token</code> set to False.</p>
<p>In most cases, using credentials is not an option, and a Machine (API)
Token is preferred. In your application, you can after instantiating
the client, you set the token property:</p>
<pre><code>from dcso.portal import APIClient

apic = APIClient(api_endpoint)
apic.token = "YOURTOKENHERE"
</code></pre>
<p>The above is done automatically for you when you set the environment
variable <code>DCSO_PORTAL_TOKEN</code>.
The <code>api_url</code> parameter is the DCSO Portal API endpoint and must be provided;
there is no default.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class APIClient(APIAbstract):
    &#34;&#34;&#34;
    .. include:: apiclient.md
    &#34;&#34;&#34;

    def __init__(self, api_url: str):
        &#34;&#34;&#34;
        The `api_url` parameter is the DCSO Portal API endpoint and must be provided;
        there is no default.
        &#34;&#34;&#34;
        self._api_url: str = &#34;&#34;
        self.api_url = api_url
        self._token: str = os.environ.get(ENV_PORTAL_TOKEN, &#34;&#34;)

        # default services
        self.auth = Auth(api=self)

    @property
    def api_url(self) -&gt; str:
        return self._api_url

    @api_url.setter
    def api_url(self, url: str) -&gt; None:
        &#34;&#34;&#34;Sets the API endpoint using the provided url. Raises `DCSOPortalConfiguration`
        when url is not valid.
        &#34;&#34;&#34;
        self._api_url = validate_api_url(url)

    def api_url_parsed(self) -&gt; urllib.parse.ParseResult:
        return urllib.parse.urlparse(self._api_url)

    @property
    def token(self) -&gt; str:
        return self._token

    @token.setter
    def token(self, token: str):
        &#34;&#34;&#34;Sets the token for each API request. This can be either a User Token (JWT)
        or a Machine Token (also known as API Token).
        &#34;&#34;&#34;
        self._token = token

    def execute_graphql(self, query: str,
                        variables: Optional[dict] = None,
                        fragments: Optional[List[str]] = None) -&gt; namedtuple:
        &#34;&#34;&#34;Executes the GraphQL query and returns response as namedtuple. This
        namedtuple starts from the &#39;data&#39;-object.

        For example, when executing query getting user information:

            response = execute_graphql(`{ user { id name }`)

        the resulting GraphQL JSON might look as follows:

            {
                &#34;data&#34;: {
                    &#34;user&#34;: { &#34;id&#34;: &#34;1234&#34;, &#34;name&#34;: &#34;Alice&#34; }
                }
            }

        Then retrieving and print the name of the user using the response:

            print(f&#34;Name: {response.user.name}&#34;)

        Raises `PortalAPIError` When the GraphQL API endpoint returned an error.
        When there was an issue with the request itself, or decoding JSON failed,
        the `PortalAPIRequest` exception is raised.
        &#34;&#34;&#34;
        request = GraphQLRequest(api_url=self.api_url,
                                 query=query, variables=variables, fragments=fragments,
                                 token=self.token)

        try:
            return request.execute()
        except PortalException:
            raise

    def execute_graphql_dict(self, query: str,
                             variables: Optional[dict] = None,
                             fragments: Optional[List[str]] = None) -&gt; dict:
        &#34;&#34;&#34;Executes the GraphQL request and return response a dictionary.

        For example, when executing query getting user information:

            response = execute_graphql_dict(`{ user { id name }`)

        the resulting GraphQL JSON might look as follows:

            {
                &#34;data&#34;: {
                    &#34;user&#34;: { &#34;id&#34;: &#34;1234&#34;, &#34;name&#34;: &#34;Alice&#34; }
                }
            }

        Then retrieving and print the name of the user using the response:

            print(f&#34;Name: {response[&#39;user&#39;][&#39;name&#39;]}&#34;)

        Raises `PortalAPIError` When the GraphQL API endpoint returned an error.
        When there was an issue with the request itself, or decoding JSON failed,
        the `PortalAPIRequest` exception is raised.
        &#34;&#34;&#34;
        request = GraphQLRequest(api_url=self.api_url,
                                 query=query, variables=variables, fragments=fragments,
                                 token=self.token)

        try:
            return request.execute_dict()[&#39;data&#39;]
        except KeyError as exc:
            raise PortalAPIRequest(f&#34;API request contained unusable error definition {exc}&#34;)
        except PortalException:
            raise

    def is_alive(self) -&gt; bool:
        &#34;&#34;&#34;Returns whether it is possible to communicate with API endpoint.&#34;&#34;&#34;
        request = GraphQLRequest(
            api_url=self.api_url,
            query=&#39;{__schema { queryType { name }}}&#39;
        )

        try:
            result = request.execute_dict()
            return &#39;Query&#39; == result[&#39;data&#39;][&#39;__schema&#39;][&#39;queryType&#39;][&#39;name&#39;]
        except (KeyError, PortalException):
            return False</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="dcso.portal.abstracts.APIAbstract" href="abstracts.html#dcso.portal.abstracts.APIAbstract">APIAbstract</a></li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="dcso.portal.api.APIClient.api_url"><code class="name">var <span class="ident">api_url</span> : str</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def api_url(self) -&gt; str:
    return self._api_url</code></pre>
</details>
</dd>
<dt id="dcso.portal.api.APIClient.token"><code class="name">var <span class="ident">token</span> : str</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def token(self) -&gt; str:
    return self._token</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="dcso.portal.api.APIClient.api_url_parsed"><code class="name flex">
<span>def <span class="ident">api_url_parsed</span></span>(<span>self) ‑> urllib.parse.ParseResult</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def api_url_parsed(self) -&gt; urllib.parse.ParseResult:
    return urllib.parse.urlparse(self._api_url)</code></pre>
</details>
</dd>
<dt id="dcso.portal.api.APIClient.execute_graphql"><code class="name flex">
<span>def <span class="ident">execute_graphql</span></span>(<span>self, query: str, variables: Union[dict, NoneType] = None, fragments: Union[List[str], NoneType] = None) ‑> <function namedtuple at 0x7f8145222c20></span>
</code></dt>
<dd>
<div class="desc"><p>Executes the GraphQL query and returns response as namedtuple. This
namedtuple starts from the 'data'-object.</p>
<p>For example, when executing query getting user information:</p>
<pre><code>response = execute_graphql(`{ user { id name }`)
</code></pre>
<p>the resulting GraphQL JSON might look as follows:</p>
<pre><code>{
    "data": {
        "user": { "id": "1234", "name": "Alice" }
    }
}
</code></pre>
<p>Then retrieving and print the name of the user using the response:</p>
<pre><code>print(f"Name: {response.user.name}")
</code></pre>
<p>Raises <code>PortalAPIError</code> When the GraphQL API endpoint returned an error.
When there was an issue with the request itself, or decoding JSON failed,
the <code>PortalAPIRequest</code> exception is raised.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def execute_graphql(self, query: str,
                    variables: Optional[dict] = None,
                    fragments: Optional[List[str]] = None) -&gt; namedtuple:
    &#34;&#34;&#34;Executes the GraphQL query and returns response as namedtuple. This
    namedtuple starts from the &#39;data&#39;-object.

    For example, when executing query getting user information:

        response = execute_graphql(`{ user { id name }`)

    the resulting GraphQL JSON might look as follows:

        {
            &#34;data&#34;: {
                &#34;user&#34;: { &#34;id&#34;: &#34;1234&#34;, &#34;name&#34;: &#34;Alice&#34; }
            }
        }

    Then retrieving and print the name of the user using the response:

        print(f&#34;Name: {response.user.name}&#34;)

    Raises `PortalAPIError` When the GraphQL API endpoint returned an error.
    When there was an issue with the request itself, or decoding JSON failed,
    the `PortalAPIRequest` exception is raised.
    &#34;&#34;&#34;
    request = GraphQLRequest(api_url=self.api_url,
                             query=query, variables=variables, fragments=fragments,
                             token=self.token)

    try:
        return request.execute()
    except PortalException:
        raise</code></pre>
</details>
</dd>
<dt id="dcso.portal.api.APIClient.execute_graphql_dict"><code class="name flex">
<span>def <span class="ident">execute_graphql_dict</span></span>(<span>self, query: str, variables: Union[dict, NoneType] = None, fragments: Union[List[str], NoneType] = None) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Executes the GraphQL request and return response a dictionary.</p>
<p>For example, when executing query getting user information:</p>
<pre><code>response = execute_graphql_dict(`{ user { id name }`)
</code></pre>
<p>the resulting GraphQL JSON might look as follows:</p>
<pre><code>{
    "data": {
        "user": { "id": "1234", "name": "Alice" }
    }
}
</code></pre>
<p>Then retrieving and print the name of the user using the response:</p>
<pre><code>print(f"Name: {response['user']['name']}")
</code></pre>
<p>Raises <code>PortalAPIError</code> When the GraphQL API endpoint returned an error.
When there was an issue with the request itself, or decoding JSON failed,
the <code>PortalAPIRequest</code> exception is raised.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def execute_graphql_dict(self, query: str,
                         variables: Optional[dict] = None,
                         fragments: Optional[List[str]] = None) -&gt; dict:
    &#34;&#34;&#34;Executes the GraphQL request and return response a dictionary.

    For example, when executing query getting user information:

        response = execute_graphql_dict(`{ user { id name }`)

    the resulting GraphQL JSON might look as follows:

        {
            &#34;data&#34;: {
                &#34;user&#34;: { &#34;id&#34;: &#34;1234&#34;, &#34;name&#34;: &#34;Alice&#34; }
            }
        }

    Then retrieving and print the name of the user using the response:

        print(f&#34;Name: {response[&#39;user&#39;][&#39;name&#39;]}&#34;)

    Raises `PortalAPIError` When the GraphQL API endpoint returned an error.
    When there was an issue with the request itself, or decoding JSON failed,
    the `PortalAPIRequest` exception is raised.
    &#34;&#34;&#34;
    request = GraphQLRequest(api_url=self.api_url,
                             query=query, variables=variables, fragments=fragments,
                             token=self.token)

    try:
        return request.execute_dict()[&#39;data&#39;]
    except KeyError as exc:
        raise PortalAPIRequest(f&#34;API request contained unusable error definition {exc}&#34;)
    except PortalException:
        raise</code></pre>
</details>
</dd>
<dt id="dcso.portal.api.APIClient.is_alive"><code class="name flex">
<span>def <span class="ident">is_alive</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Returns whether it is possible to communicate with API endpoint.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_alive(self) -&gt; bool:
    &#34;&#34;&#34;Returns whether it is possible to communicate with API endpoint.&#34;&#34;&#34;
    request = GraphQLRequest(
        api_url=self.api_url,
        query=&#39;{__schema { queryType { name }}}&#39;
    )

    try:
        result = request.execute_dict()
        return &#39;Query&#39; == result[&#39;data&#39;][&#39;__schema&#39;][&#39;queryType&#39;][&#39;name&#39;]
    except (KeyError, PortalException):
        return False</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="pdoc Home" href="https://dcso.de">
<img src="https://avatars1.githubusercontent.com/u/17251161?s=200&v=4" width="52"> DCSO</a> Portal Python SDK
</header>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="dcso.portal" href="index.html">dcso.portal</a></code></li>
</ul>
</li>
<li><h3><a href="#header-variables">Global variables</a></h3>
<ul class="">
<li><code><a title="dcso.portal.api.ENV_PORTAL_TOKEN" href="#dcso.portal.api.ENV_PORTAL_TOKEN">ENV_PORTAL_TOKEN</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="dcso.portal.api.APIClient" href="#dcso.portal.api.APIClient">APIClient</a></code></h4>
<ul class="">
<li><code><a title="dcso.portal.api.APIClient.api_url" href="#dcso.portal.api.APIClient.api_url">api_url</a></code></li>
<li><code><a title="dcso.portal.api.APIClient.api_url_parsed" href="#dcso.portal.api.APIClient.api_url_parsed">api_url_parsed</a></code></li>
<li><code><a title="dcso.portal.api.APIClient.execute_graphql" href="#dcso.portal.api.APIClient.execute_graphql">execute_graphql</a></code></li>
<li><code><a title="dcso.portal.api.APIClient.execute_graphql_dict" href="#dcso.portal.api.APIClient.execute_graphql_dict">execute_graphql_dict</a></code></li>
<li><code><a title="dcso.portal.api.APIClient.is_alive" href="#dcso.portal.api.APIClient.is_alive">is_alive</a></code></li>
<li><code><a title="dcso.portal.api.APIClient.token" href="#dcso.portal.api.APIClient.token">token</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<div style="width: 100%; display: flex; justify-content: flex-end">
<div>
<p>Copyright (c) 2020, 2021, <a href="https://dcso.de">DCSO Deutsche Cyber-Sicherheitsorganisation GmbH</a></p>
</div>
<div>
<p><strong>v1.0.0-beta2</strong></p>
</div>
</div>
</footer>
</body>
</html>